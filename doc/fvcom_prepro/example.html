<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of example</title>
  <meta name="keywords" content="example">
  <meta name="description" content="example demonstrating reading in a 2DM file and constructing a model">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">fvcom_prepro</a> &gt; example.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for fvcom_prepro&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>example
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>example demonstrating reading in a 2DM file and constructing a model</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> example demonstrating reading in a 2DM file and constructing a model

 function example

 DESCRIPTION:
    Read in a 2DM Mesh file
    Select river nodes using Matlab interface
    Select open boundary nodes using Matlab interface
    Select sponge layer nodes and set radius and coefficient
    Dump river file, open boundary forcing file, time series wind forcing 
      file, grid file, open boundary node list file, bathymetry file, 
      and sponge file

 INPUT
   
 OUTPUT:
    A bunch of files

 EXAMPLE USAGE
    example

 Author(s):  
    Geoff Cowles (University of Massachusetts Dartmouth)

 Revision history
   
==============================================================================</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="add_coriolis.html" class="code" title="function [Mobj] = add_coriolis(Mobj,cortype,fval)">add_coriolis</a>	Generate latitude used for FVCOM Coriolis file</li><li><a href="add_obc_nodes.html" class="code" title="function [Mobj]  = add_obc_nodes(Mobj,ObcName,ObcType)">add_obc_nodes</a>	Add a set of obc nodes comprising a single obc boundary to Mesh structure</li><li><a href="add_river_nodes.html" class="code" title="function [Mobj]  = add_river_nodes(Mobj,RiverName)">add_river_nodes</a>	Add a set of river nodes comprising a single river to Mesh structure</li><li><a href="example_FVCOM_river.html" class="code" title="function example_FVCOM_river()">example_FVCOM_river</a>	example file for dumping an FVCOM river file and adding sediment concentration</li><li><a href="example_FVCOM_tsobc.html" class="code" title="function example_FVCOM_tsobc()">example_FVCOM_tsobc</a>	example file for dumping a file to force temperature and salinity at the open b.</li><li><a href="example_FVCOM_wind_ts.html" class="code" title="function example_FVCOM_wind_ts">example_FVCOM_wind_ts</a>	example file for FVCOM, time-varying/spatially constant wind forcing as stress</li><li><a href="plot_field.html" class="code" title="function plot_field(Mobj,PlotField,varargin)">plot_field</a>	Plot the mesh, user defined field, open boundary nodes, and river points</li><li><a href="read_sms_mesh.html" class="code" title="function [Mobj] = read_sms_mesh(varargin)">read_sms_mesh</a>	Read sms mesh files into Matlab mesh object</li><li><a href="set_spectide.html" class="code" title="function set_spectide(Mobj)">set_spectide</a>	Setup spectral tides on the open boundary and dump a spectral file</li><li><a href="write_FVCOM_bath.html" class="code" title="function write_FVCOM_bath(Mobj,filename)">write_FVCOM_bath</a>	Write bathymetry to FVCOM format bathymetry file</li><li><a href="write_FVCOM_cor.html" class="code" title="function write_FVCOM_cor(Mobj,filename)">write_FVCOM_cor</a>	Write coriolis to FVCOM format coriolis file</li><li><a href="write_FVCOM_grid.html" class="code" title="function write_FVCOM_grid(Mobj,filename)">write_FVCOM_grid</a>	Write grid and connectivity to FVCOM format grid file</li><li><a href="write_FVCOM_obc.html" class="code" title="function write_FVCOM_obc(Mobj,filename)">write_FVCOM_obc</a>	Write FVCOM format open boundary node list file</li><li><a href="write_FVCOM_sponge.html" class="code" title="function write_FVCOM_sponge(Mobj,filename)">write_FVCOM_sponge</a>	Write FVCOM format sponge layer file</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">% example demonstrating reading in a 2DM file and constructing a model</span>
0002 <span class="comment">%</span>
0003 <span class="comment">% function example</span>
0004 <span class="comment">%</span>
0005 <span class="comment">% DESCRIPTION:</span>
0006 <span class="comment">%    Read in a 2DM Mesh file</span>
0007 <span class="comment">%    Select river nodes using Matlab interface</span>
0008 <span class="comment">%    Select open boundary nodes using Matlab interface</span>
0009 <span class="comment">%    Select sponge layer nodes and set radius and coefficient</span>
0010 <span class="comment">%    Dump river file, open boundary forcing file, time series wind forcing</span>
0011 <span class="comment">%      file, grid file, open boundary node list file, bathymetry file,</span>
0012 <span class="comment">%      and sponge file</span>
0013 <span class="comment">%</span>
0014 <span class="comment">% INPUT</span>
0015 <span class="comment">%</span>
0016 <span class="comment">% OUTPUT:</span>
0017 <span class="comment">%    A bunch of files</span>
0018 <span class="comment">%</span>
0019 <span class="comment">% EXAMPLE USAGE</span>
0020 <span class="comment">%    example</span>
0021 <span class="comment">%</span>
0022 <span class="comment">% Author(s):</span>
0023 <span class="comment">%    Geoff Cowles (University of Massachusetts Dartmouth)</span>
0024 <span class="comment">%</span>
0025 <span class="comment">% Revision history</span>
0026 <span class="comment">%</span>
0027 <span class="comment">%==============================================================================</span>
0028 
0029 
0030 clear all; close all;
0031 
0032 <span class="comment">% read the Mesh from an SMS file</span>
0033 Mobj = <a href="read_sms_mesh.html" class="code" title="function [Mobj] = read_sms_mesh(varargin)">read_sms_mesh</a>(<span class="string">'2dm'</span>,<span class="string">'./samples/tst.2dm'</span>,<span class="string">'bath'</span>,<span class="string">'./samples/tst.dep'</span>);
0034 
0035 <span class="comment">% reverse the topography so that it is positive down (e.g. bathymetry)</span>
0036 <span class="keyword">if</span>(mean(Mobj.h) &lt; 0.0)
0037     Mobj.h = -Mobj.h;
0038 <span class="keyword">end</span>;
0039 
0040 <span class="comment">% calculate the Corolis</span>
0041 Mobj = <a href="add_coriolis.html" class="code" title="function [Mobj] = add_coriolis(Mobj,cortype,fval)">add_coriolis</a>(Mobj,<span class="string">'constant'</span>,31.0);
0042 
0043 <span class="comment">% check the time step and plot</span>
0044 <span class="comment">%Mobj = estimate_ts(Mobj);</span>
0045 <span class="comment">%plot_field(Mobj,Mobj.ts,'title','timestep (s)')</span>
0046 
0047 <span class="comment">% smooth bathymetry with 4 iterations of explicit smoother</span>
0048 <span class="comment">%plot_field(Mobj,Mobj.h,'title','original bathymetry')</span>
0049 <span class="comment">%Mobj = setup_metrics(Mobj);</span>
0050 <span class="comment">%[Mobj.h] = smoothfield(Mobj.h,Mobj,0.5,4);</span>
0051 <span class="comment">%plot_field(Mobj,Mobj.h,'title','smoothed bathymetry');</span>
0052 
0053 <span class="comment">% setup spatially variable bottom roughness and dump to file</span>
0054 <span class="comment">% hc = nodes2elems(Mobj.h,Mobj);</span>
0055 <span class="comment">% z0 = .008*ones(Mobj.nElems,1);</span>
0056 <span class="comment">% deep = find(hc &gt; 5.);</span>
0057 <span class="comment">% z0(deep) = .004;</span>
0058 <span class="comment">% clear hc;</span>
0059 <span class="comment">% write_FVCOM_z0(z0,'tst_z0.nc','z0 test 1')</span>
0060 <span class="comment">% plot_field(Mobj,elems2nodes(z0,Mobj),'title','bottom roughness')</span>
0061 
0062 <span class="comment">% add two rivers to the Mesh</span>
0063 [Mobj] = <a href="add_river_nodes.html" class="code" title="function [Mobj]  = add_river_nodes(Mobj,RiverName)">add_river_nodes</a>(Mobj,<span class="string">'tstRiver'</span>);
0064 <span class="comment">% [Mobj] = add_river_nodes(Mobj,'Kennebec');</span>
0065 
0066 <span class="comment">% add an open boundary to the Mesh</span>
0067 [Mobj] = <a href="add_obc_nodes.html" class="code" title="function [Mobj]  = add_obc_nodes(Mobj,ObcName,ObcType)">add_obc_nodes</a>(Mobj,<span class="string">'OpenOcean'</span>,1);
0068 <span class="comment">% [Mobj] = add_obc_nodes(Mobj,'OpenOcean2',1);</span>
0069 
0070 <span class="comment">% add two sponge layers to the Mesh</span>
0071 <span class="comment">% [Mobj] = add_sponge_nodes(Mobj,'Sponge1',10000,.0001);</span>
0072 <span class="comment">% [Mobj] = add_sponge_nodes(Mobj,'Sponge2',5000,.0004);</span>
0073 
0074 <span class="comment">% plot everything</span>
0075 <a href="plot_field.html" class="code" title="function plot_field(Mobj,PlotField,varargin)">plot_field</a>(Mobj,Mobj.h,<span class="string">'title'</span>,<span class="string">'domain'</span>,<span class="string">'withextra'</span>,true,<span class="string">'showgrid'</span>,true);
0076 
0077 
0078 
0079 <span class="comment">%------------------------------------------------------------------------------</span>
0080 <span class="comment">% dump input files for FVCOM 3.x</span>
0081 <span class="comment">%------------------------------------------------------------------------------</span>
0082 
0083 <span class="comment">% add river forcing</span>
0084 <a href="example_FVCOM_river.html" class="code" title="function example_FVCOM_river()">example_FVCOM_river</a>()
0085 
0086 <span class="comment">% add harmonic forcing to open boundary</span>
0087 <a href="set_spectide.html" class="code" title="function set_spectide(Mobj)">set_spectide</a>(Mobj)
0088 
0089 <span class="comment">% add Julian forcing to the open boundary using t_tide station</span>
0090 
0091 <span class="comment">% wind time series wind forcing example here</span>
0092 <a href="example_FVCOM_wind_ts.html" class="code" title="function example_FVCOM_wind_ts">example_FVCOM_wind_ts</a>
0093 
0094 <span class="comment">% dump mesh and connectivity</span>
0095 <a href="write_FVCOM_grid.html" class="code" title="function write_FVCOM_grid(Mobj,filename)">write_FVCOM_grid</a>(Mobj,<span class="string">'tst_grd.dat'</span>)
0096 
0097 <span class="comment">% dump bathymetry</span>
0098 <a href="write_FVCOM_bath.html" class="code" title="function write_FVCOM_bath(Mobj,filename)">write_FVCOM_bath</a>(Mobj,<span class="string">'tst_dep.dat'</span>)
0099 
0100 <span class="comment">% dump a Temp/Salinity open boundary forcing file</span>
0101 <a href="example_FVCOM_tsobc.html" class="code" title="function example_FVCOM_tsobc()">example_FVCOM_tsobc</a>()
0102 
0103 <span class="comment">% % dump open boundary node list</span>
0104 <a href="write_FVCOM_obc.html" class="code" title="function write_FVCOM_obc(Mobj,filename)">write_FVCOM_obc</a>(Mobj,<span class="string">'tst_obc.dat'</span>)
0105 
0106 <span class="comment">% dump sponge layer file</span>
0107 <a href="write_FVCOM_sponge.html" class="code" title="function write_FVCOM_sponge(Mobj,filename)">write_FVCOM_sponge</a>(Mobj,<span class="string">'tst_spg.dat'</span>);
0108 
0109 <span class="comment">% dump Coriolis file</span>
0110 <a href="write_FVCOM_cor.html" class="code" title="function write_FVCOM_cor(Mobj,filename)">write_FVCOM_cor</a>(Mobj,<span class="string">'tst_cor.dat'</span>)
0111 
0112</pre></div>
<hr><address>Generated on Tue 09-Nov-2010 13:53:28 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>